<div id="home-map" style="height:100%"></div>

<div class="users-map">
  <ul>

<div class="large-6 push-6 columns">
    <% if params[:search] && params[:search][:city_search] && params[:search][:learning_search] %>

      <% @users.each do |user| %>

    <li>


        <%= gravatar_for user %>

        <%= link_to user.first_name, user %>

        <% if user.admin? && !current_user %>

          | <%= link_to "Delete", user, confirm: "Are you sure?", method: :delete %>

  
        <% end %>
      
      <% end %>
    </li>

  <% end %>
</div>


</ul>
</div>

<%= javascript_tag do %>
  window.latitude = <%= @users.first.latitude %>;
  window.longitude = <%= @users.first.longitude %>;
  window.showMarker = true;

  window.coords = <%= raw @users.map{|user| {latitude: user.latitude, longitude: user.longitude}}.to_json %>;

  var map;

  function initialize() {
        var location = new google.maps.LatLng(latitude, longitude);
        var mapOptions = {
          center: location,
          zoom: 8
        };
        var map = new google.maps.Map(document.getElementById("home-map"),
            mapOptions);
      }
  if(latitude && longitude){
    google.maps.event.addDomListener(window, 'load', initialize);
  }else{
    $(".users-map").html("<h2>No users meng!</h2>");
}
  
<% end %>